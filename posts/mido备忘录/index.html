<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" type=image/png href=https://MrLeeYoungHoo.github.io/favicon.ico><meta property="og:url" content="https://MrLeeYoungHoo.github.io/posts/mido%E5%A4%87%E5%BF%98%E5%BD%95/"><meta property="og:site_name" content="YEO'S BLOG"><meta property="og:title" content="把红米note4x刷成linux小服务器"><meta property="og:description" content="把旧红米手机刷成了linux系统，记录一下刷机的过程。"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-05-22T22:55:15+08:00"><meta property="article:modified_time" content="2025-05-22T22:55:15+08:00"><meta property="article:tag" content="折腾"><meta property="article:tag" content="备忘录"><title>YEO'S BLOG | 把红米note4x刷成linux小服务器</title>
<link rel=stylesheet href=/css/main.min.698bc3e32b756e1f5322e47c0a024ef4fef02de7ddbc5af443455430b5482f03.css integrity="sha256-aYvD4yt1bh9TIuR8CgJO9P7wLefdvFr0Q0VUMLVILwM=" crossorigin=anonymous><link rel=stylesheet href=/css/palette/catpuccin.min.a6f1bd4508a6b97805eeaaeb50fc8c575ad5fa2c430125dd9d003f2ea254600d.css integrity="sha256-pvG9RQimuXgF7qrrUPyMV1rV+ixDASXdnQA/LqJUYA0=" crossorigin=anonymous><script src=/js/main.86bb3d8e6f46df0fc97c2731e6b99175a13b87a4086acf578ff9b6992fcf32c1.js integrity="sha256-hrs9jm9G3w/JfCcx5rmRdaE7h6QIas9Xj/m2mS/PMsE=" crossorigin=anonymous></script><link href=https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css rel=stylesheet integrity=sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH crossorigin=anonymous></head><body class=dark><main><div class="container pt-5"><div class="row mt-5 pt-5"><nav aria-label=breadcrumb class=small><ol class="breadcrumb fw-bold"><li class=breadcrumb-item><a href=/>home</a></li><li class=breadcrumb-item><a href=/about>about</a></li><li class=breadcrumb-item><a href=/posts class="text-decoration-underline link-offset-3">posts</a></li></ol></nav></div><div class="d-none d-lg-block position-fixed end-0 small toc"><p class=toc-title>Table of Contents:</p><nav id=TableOfContents><ul><li><a href=#一mido刷成linux系统>一、<code>mido</code>刷成<code>linux</code>系统</a><ul><li><a href=#在终端键入>在终端键入：</a></li><li><a href=#继续输入>继续输入:</a></li><li><a href=#重启一次>重启一次</a></li><li><a href=#此时设备会重启重启后键入以下命令完成刷机>此时设备会重启，重启后键入以下命令完成刷机</a></li><li><a href=#重启并进入linux系统>重启并进入<code>linux</code>系统</a></li></ul></li><li><a href=#二mido刷机完成后的初步设置>二、<code>mido</code>刷机完成后的初步设置</a><ul><li><a href=#连接到ssh>连接到<code>ssh</code></a></li><li><a href=#安装nls_utf8模块>安装<code>nls_utf8</code>模块。</a></li></ul></li><li><a href=#三更新系统设置虚拟内存安装docker安装1pannel开机自挂载tf卡>三、更新系统，设置虚拟内存，安装<code>docker</code>，安装<code>1pannel</code>，开机自挂载<code>tf</code>卡</a><ul><li><a href=#更新系统>更新系统</a></li><li><a href=#设置虚拟内存swap>设置虚拟内存<code>swap</code></a></li><li><a href=#安装常用工具>安装常用工具</a></li><li><a href=#先安装好docker>先安装好<code>docker</code></a></li><li><a href=#官方脚本安装1pannel可能失败失败就先安装好docker再用脚本>官方脚本安装<code>1pannel</code>(可能失败，失败就先安装好<code>docker</code>再用脚本)</a></li><li><a href=#ufw设置规则><code>ufw</code>设置规则</a></li><li><a href=#开机自挂载tf卡>开机自挂载<code>tf</code>卡</a></li></ul></li><li><a href=#四其他设置>四、其他设置</a><ul><li><a href=#设置屏幕亮度的命令调成0就算关闭屏幕>设置屏幕亮度的命令,调成<code>0</code>就算关闭屏幕</a></li></ul></li></ul></nav></div><div class=post><header class=mb-4><h1 class=text-uppercase>把红米note4x刷成linux小服务器</h1><div aria-label=breadcrumb><ol class=breadcrumb><li class="breadcrumb-item small"><time datetime=2025-05-22T22:55:15+08:00>May 22, 2025</time></li><li class="breadcrumb-item small">1 minutes</li></ol></div></header><article><h2 id=一mido刷成linux系统>一、<code>mido</code>刷成<code>linux</code>系统</h2><blockquote><ol><li>手机📱关机状态下长按电源键和下键尝试进入<code>booltloader</code></li><li>电脑💻进入下载的刷机包的文件夹位置，刷机包来自<ul><li>酷安<code>holdmyhand</code><a href=https://www.cnblogs.com/holdmyhand>这个链接</a>是他的博客</li><li><a href=https://www.coolapk.com/feed/54063620>酷安原帖</a>(好像只能手机浏览器打开)，可在酷安红米note4x板块搜- linux找到</li><li>👉<a href=https://www.123pan.com/s/T68ujv-NSIwv>这个链接</a>是他分享刷机包文件</li><li>👉<a href=https://www.123684.com/s/axLLVv-OJzsH>这个链接</a>是我转存后的我的分享(备用)</li></ul></li><li>数据线连接电脑(能原装原装)，打开终端<code>fastboot devices</code>看手机是否链接上，有输出可开始刷机
(这个需要提前安装plantform-tool并设置环境变量，不懂可问ai，有可能<code>fastboot devices</code>后没任何输出，去下载miflasher官方线刷工具安装驱动后应该就能识别。</li></ol></blockquote><p><strong>⚠️开始刷机⚠️</strong>
<em>去到下载好的文件的文件夹，解压<code>.7z</code>文件，然后在这个文件夹右键-在终端打开，会弹出黑框框</em></p><h3 id=在终端键入>在终端键入：</h3><pre tabindex=0><code>fastboot devices
</code></pre><p>如果有输出则说明已连接。</p><h3 id=继续输入>继续输入:</h3><pre tabindex=0><code>fastboot erase userdata
fastboot erase boot
fastboot flash boot lk2nd.img(此为lk2nd的文件名,具体以自己文件夹下的文件名为主,下面提及的带.xxx的都是具体文件名自行更改的调整)
</code></pre><h3 id=重启一次>重启一次</h3><pre tabindex=0><code>fastboot reboot
</code></pre><h3 id=此时设备会重启重启后键入以下命令完成刷机>此时设备会重启，重启后键入以下命令完成刷机</h3><pre tabindex=0><code>fastboot flash boot boot.img # 这个boot.img具体以你那边为主。我为了好记修改过，或者你可以重命名成我的样子后再复制粘贴命令
fastboot flash userdata rootfs.img
</code></pre><h3 id=重启并进入linux系统>重启并进入<code>linux</code>系统</h3><pre tabindex=0><code>fastboot reboot
</code></pre><h2 id=二mido刷机完成后的初步设置>二、<code>mido</code>刷机完成后的初步设置</h2><h3 id=连接到ssh>连接到<code>ssh</code></h3><ol><li>windows安装putty并打开,然后右键win按钮点击设备管理器找到usb设备，那里会显示插在电脑上的手机的一个串口:COM1(数字不一定是1)。之后去putty设置串口连接，填入com和数字，端口选115200,就能连接上ssh,用户名hol,密码是1</li><li>执行<code>sudo -i</code>切换到root,然后键入nmtui回车会叫你设置wifi,然后执行<code>ip addr</code>查找内网ip(形如<code>192.168.xx.xx</code>)，记住ip</li><li>现在可以拔开usb，将手机插到充电放一边不管。用ssh协议连接服务器</li></ol><h3 id=安装nls_utf8模块>安装<code>nls_utf8</code>模块。</h3><p>研究酷安原帖子评论区后知道，此包由于作者构建时忘了设置本地化，无法显示中文。因此需要安装此模块，模块是在分享的链接中的名字以.ko结尾</p><h4 id=具体步骤>具体步骤:</h4><ol><li>将.ko文件上传到手机中</li><li>将.ko文件复制到/lib/moudles/6.7.5xxxx/kernel/fs/nls/下
(写6.7.5xxxx是我忘记具体名了你自动补全就行)</li><li>修改文件为root属主,执行:
<code>sudo chown root:root nls_utf8.ko</code></li><li>执行<code>sudo depmod</code></li><li>执行<code>sudo modprobe nls_utf8</code></li><li>设置开机自挂载模块
执行<code>vim /etc/modules</code>在文件最下面添加<code>nls_utf8</code>输入<code>:wq</code>后按回车🔙退出</li><li>重启一下,可以用vim新建一个文本输入中文测试看看是否乱码</li><li>如果还有问题可设置locale,执行:
<code>sudo update-locale LANG=en_US.UTF-8</code></li></ol><h2 id=三更新系统设置虚拟内存安装docker安装1pannel开机自挂载tf卡>三、更新系统，设置虚拟内存，安装<code>docker</code>，安装<code>1pannel</code>，开机自挂载<code>tf</code>卡</h2><h3 id=更新系统>更新系统</h3><pre tabindex=0><code>apt update &amp;&amp; apt upgrade -y
</code></pre><h3 id=设置虚拟内存swap>设置虚拟内存<code>swap</code></h3><pre tabindex=0><code>fallocate -l 2G /swapfile
chmod 600 /swapfile
mkswap /swapfile
swapon /swapfile
</code></pre><p>编辑/etc/fstab，执行<code>vim /etc/fstab</code>，将下列复制到文件最下，然后输入<code>:wq</code>回车退出</p><pre tabindex=0><code>/swapfile none swap sw 0 0
</code></pre><h3 id=安装常用工具>安装常用工具</h3><pre tabindex=0><code>apt install curl wget ufw tree
</code></pre><h3 id=先安装好docker>先安装好<code>docker</code></h3><pre tabindex=0><code>curl -fsSL https://get.docker.com -o get-docker.sh
sh ./get-docker.sh
</code></pre><h3 id=官方脚本安装1pannel可能失败失败就先安装好docker再用脚本>官方脚本安装<code>1pannel</code>(可能失败，失败就先安装好<code>docker</code>再用脚本)</h3><pre tabindex=0><code>curl -sSL https://resource.fit2cloud.com/1panel/package/quick_start.sh -o quick_start.sh &amp;&amp; sudo bash quick_start.sh
# 一路回车就行了会输出默认登录信息，登录后到网页上改就行了
</code></pre><h3 id=ufw设置规则><code>ufw</code>设置规则</h3><pre tabindex=0><code>ufw allow 22 # ssh端口
ufw allow &lt;1pannel的端口&gt;
</code></pre><p>执行<code>ufw enable</code>启动防火墙
后续可以根据自己需求修改防火墙，1pannel也有防火墙配置选项</p><h3 id=开机自挂载tf卡>开机自挂载<code>tf</code>卡</h3><pre tabindex=0><code>mkdir -p /home/sdcard # 创建挂载点，&#34;/home/sdcard&#34;是我选的位置，随便填
</code></pre><p>执行<code>vim /etc/fstab</code> 在文末添加下面的👇文字(UUID是你的tf卡的ID，怎么查可问gpt)输入<code>:wq</code>后按回车🔙退出</p><pre tabindex=0><code>UUID=2C64-3FB1 /home/sdcard  exfat  defaults  0  2
</code></pre><h2 id=四其他设置>四、其他设置</h2><h3 id=设置屏幕亮度的命令调成0就算关闭屏幕>设置屏幕亮度的命令,调成<code>0</code>就算关闭屏幕</h3><pre tabindex=0><code>bash -c &#39;echo 0 &gt; /sys/class/backlight/backlight/brightness&#39;
</code></pre></article><div class="tags pb-4 pt-2"><a class="badge rounded-pill text-uppercase text-bg-secondary" href=/tags/%E6%8A%98%E8%85%BE/>折腾</a>
<a class="badge rounded-pill text-uppercase text-bg-secondary" href=/tags/%E5%A4%87%E5%BF%98%E5%BD%95/>备忘录</a></div><div class=row><div class=col-md><a href=https://MrLeeYoungHoo.github.io/posts/selfhosted-vaultwarden/><span>previous: </span><span>在Debian12上用docker部署Vaultwarden</span></a></div><div class="col-md text-md-end"></div></div></div></div><footer><div class="container mt-4 pb-1"><p class="small opacity-75">yeo's blog © 2025
<a href="https://icp.gov.moe/?keyword=20240310" style=font-size:14px;color:gray;text-decoration:none>萌ICP备20240310</a> // powered by <a href=https://gohugo.io/>hugo</a> and <a href=https://github.com/imgios/not-much>imgios/not-much</a></p></div></footer></main><script src=https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js integrity=sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz crossorigin=anonymous></script></body></html>